# 설계 문서 작성 순서

목적: 설계 문서의 작성 순서와 각 산출물의 관계를 명확히 하여 일관된 개발·검토 흐름을 만들기 위함.

기본 원칙
- 순서는 권장 사항이며, 전체 과정은 반복(iterative)으로 진행해야 합니다. 각 단계에서 도출된 용어·요구·모델은 다음 단계에 반영되고, 필요 시 이전 단계로 되돌아가 수정합니다.

우선 순서(권장)
1. 도메인 유비쿼터스 언어(도메인 공통어) 정의
   - 목적: 핵심 용어(엔티티, 상태, 행위)를 팀 전원이 같은 의미로 사용하도록 정리합니다.
   - 산출물: `glossary.md` (용어, 정의, 동의어, 예시, 소유자)
   - 소유자: 도메인 담당자(PO/도메인 엔지니어)

2. 업무 유스케이스(Business Use Cases) 작성
   - 목적: 사용자의 목표·시나리오·성공/예외 흐름을 비즈니스 관점으로 정리합니다.
   - 산출물: 유스케이스 문서(목표, 전제조건, 주요 흐름, 예외 케이스, 수용기준)
   - 참고: 유비쿼터스 언어를 사용해 모호성 제거

3. 기능 유스케이스(Functional Use Cases) 도출
   - 목적: 업무 유스케이스를 시스템·API 수준으로 분해하여 기능적 요구로 변환합니다.
   - 산출물: 기능 목록, 시퀀스/상태흐름, 데이터 요구사항(입력/출력), 보안/성능 제약
   - 참고: 도메인 모델(엔티티 구조)을 명확히 하고 API 모델 매핑을 준비

4. API 스펙(OpenAPI 등) 작성
   - 목적: 기능 유스케이스를 바탕으로 실사용 가능한 계약(contract)으로 기술합니다.
   - 산출물: `openapi/` 하위의 OpenAPI 파일, 엔드포인트·스키마·응답·에러 규약 명세
   - 검증: Spectral 등으로 린트, 모킹(Prism)으로 소비자 테스트, 코드 생성 도구로 스텁 생성

반복·동기화 규칙
- 각 단계는 독립적으로 완전할 필요 없이 점진적으로 상세화합니다.
- 변경 시 우선 순위를 정하고, 다음 규칙을 따릅니다:
  1) 용어 변경 → `glossary.md` 갱신 → 관련 유스케이스/스펙 검토
  2) 유스케이스 변경 → 기능 유스케이스 및 API 스펙 영향 분석 → PR로 동기화
  3) API 스펙 변경 → Spectral 린트/자동검증 통과 후 배포
- PR 템플릿에 "관련 유스케이스/용어/스펙 링크"를 요구하여 변경 영향도를 명확히 하세요.

권한·소유
- 각 산출물에 소유자(팀/역할)를 명시합니다. 예: `glossary.md` 소유자 = 도메인 담당자, API 스펙 소유자 = API 담당 팀.

간단 체크리스트
- `glossary.md` 존재 여부 확인
- 핵심 유스케이스 1~3개 초안 작성
- 기능 유스케이스로 변환 후 최소 한 개 API 엔드포인트 스펙화
- Spectral 린트 통과 및 모킹으로 소비자 시나리오 검증

마지막으로: 이 과정은 문서화된 절차이지만 실무에서는 반복과 협업이 핵심입니다. 작은 단위로 자주 검증하고, PR과 CI에서 동기화를 자동화하세요.
